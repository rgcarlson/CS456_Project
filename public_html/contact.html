
<!DOCTYPE html>
<html>
    <head>
      <!-- Contact form Design from https://formspree.io/blog/html-contact-form/-->
            <meta charset="utf-8" /> <!-- charset --> 
            <meta name="viewport" content="width=device-width, initial-scale=1" /> <!-- viewport --> 
         
            <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/css/bootstrap.min.css" /> <!-- Bootstrap CSS --> 
            <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.7.2/font/bootstrap-icons.css" />
         
            <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/js/bootstrap.bundle.min.js"></script> <!-- Bootstrap JS --> 
            <script src="12classroom.js"></script>
            <script> const dao = require('./model/UserDaoMem'); </script>
        
            <style>
    a{
        color:white;
        text-indent: 20px;
        text-decoration: none;
        font-family: "Roboto", sans-serif;
        font-size: 1.1em;
    }
    
    h3{
        margin-left:20px ;
        font-size: 1em;
        font-weight:bold;
    }
    
    .navbar-nav {
         flex-direction: row;
         padding-right:50px;
    }
    
    p{
        margin-left:20px ;
    }
    
    
    .nav-link{
        color:white;
    }
    #serviceProvider{
        visibility:hidden;
    }
            </style>
    
            <nav class="navbar navbar-inverse navbar-fixed-top bg-dark ">
                <div class="container-fluid">
                <div class="navbar-header">
                    <a href="assignment1.html"><img src = "logo.png" width = 75 height = 75></img></a>
                </div>
                <ul class="nav navbar-nav">
                    <li class="nav-item"><a href="about.html" class="nav-link">  About  </a></li>
                    <li class = "nav-item"><a href="contact.html" class="nav-link">  Contact </a></li>
                    <li class = "nav-item"><a href="faqs.html" class="nav-link">  FAQs </a></li>
                    <li class = "nav-item"><a href="login.html" class="nav-link">  Login </a></li>
            
                </ul>
                </div>
            </nav>
            
                
            </nav>
    
        <style>/* reset */
            #fs-frm input,
            #fs-frm select,
            #fs-frm textarea,
            #fs-frm fieldset,
            #fs-frm optgroup,
            #fs-frm label,
            #fs-frm #card-element:disabled {
              font-family: inherit;
              font-size: 100%;
              color: inherit;
              border: none;
              border-radius: 0;
              display: block;
              margin-left: 15%;
              padding-top: 30px;
              width: 70%;
              padding: 50;
              margin: 50;
              -webkit-appearance: none;
              -moz-appearance: none;
            }
            #fs-frm label,
            #fs-frm legend,
            #fs-frm ::placeholder {
              font-size: .825rem;
              margin-bottom: .5rem;
              padding-top: .2rem;
              display: flex;
              align-items: baseline;
            }
            
            /* border, padding, margin, width */
            #fs-frm input,
            #fs-frm select,
            #fs-frm textarea,
            #fs-frm #card-element {
              border: 1px solid rgba(0,0,0,0.2);
              background-color: rgba(255,255,255,0.9);
              padding: .75em 1rem;
              margin-bottom: 1.5rem;
            }
            #fs-frm input:focus,
            #fs-frm select:focus,
            #fs-frm textarea:focus {
              background-color: white;
              outline-style: solid;
              outline-width: thin;
              outline-color: gray;
              outline-offset: -1px;
            }
            #fs-frm [type="text"],
            #fs-frm [type="email"] {
              margin-left: 15%;
              width: 70%;
            }
            #fs-frm [type="button"],
            #fs-frm [type="submit"],
            #fs-frm [type="reset"] {
              width: auto;
              cursor: pointer;
              -webkit-appearance: button;
              -moz-appearance: button;
              appearance: button;
            }
            #fs-frm [type="button"]:focus,
            #fs-frm [type="submit"]:focus,
            #fs-frm [type="reset"]:focus {
              outline: none;
            }
            #fs-frm [type="submit"],
            #fs-frm [type="reset"] {
              margin-bottom: 0;
            }
            #fs-frm select {
              text-transform: none;
            }
            
            #fs-frm [type="checkbox"] {
              -webkit-appearance: checkbox;
              -moz-appearance: checkbox;
              appearance: checkbox;
              display: inline-block;
              width: auto;
              margin: 0 .5em 0 0 !important;
            }
            
            #fs-frm [type="radio"] {
              -webkit-appearance: radio;
              -moz-appearance: radio;
              appearance: radio;
            }
            
            /* address, locale */
            #fs-frm fieldset.locale input[name="city"],
            #fs-frm fieldset.locale select[name="state"],
            #fs-frm fieldset.locale input[name="postal-code"] {
              display: inline;
            }
            #fs-frm fieldset.locale input[name="city"] {
              width: 52%;
            }
            #fs-frm fieldset.locale select[name="state"],
            #fs-frm fieldset.locale input[name="postal-code"] {
              width: 20%;
            }
            #fs-frm fieldset.locale input[name="city"],
            #fs-frm fieldset.locale select[name="state"] {
              margin-right: 3%;
            }
            </style>

    </head>
    <body>

      <div class="container">
        <div id="rest"> 
        </div>
      </div>

        <form class="was-validated" method="post" action="http://localhost:4000/contact" id="fs-frm" name="fs-frm">
          <fieldset id="fs-frm-inputs">
            <label for="txt_name">Name</label>
            <input class="form-control" type="text" name="txt_name" id="txt_name" placeholder="ex: John Doe" required />
            <label for="email-address">Email Address</label>
            <input class="form-control" type="email" name="txt_email" id="txt_email" placeholder="email@domain.tld" required>
            <label for="message">Message</label>
            <textarea rows="5" name="txt_message" id="txt_message" placeholder="Aenean lacinia bibendum nulla sed consectetur. Vivamus sagittis lacus vel augue laoreet rutrum faucibus dolor auctor. Donec ullamcorper nulla non metus auctor fringilla nullam quis risus." required=""></textarea>
            <input type="hidden" name="_subject" id="email-subject" value="Contact Form Submission">
          </fieldset>
            <input type="submit" name="submit" value="Submit">
          </form>

          <button onclick="delContact()" id ="delete"> Delete </button>
          <button onclick="dao.updateContact()" id="update"> Update </button>

          <script>
            let users = [{_id:0, name:'test'}];
            /*** main function to ask the server for user data
                and display it in this web page.
                */
            async function delContact(){
              const response = await fetch('http://localhost:4000/delContact/:id')
              document.getElementById('rest').innerHTML = out;
            }

            async function updateContact(){
              const response = await fetch('http://localhost:4000/updateContact')
              document.getElementById('rest').innerHTML = out;
            }

            async function getUsers(){ 
              let response = await fetch('http://localhost:4000/contact');
              //If this page is running on the same server, then just fetch('/contact') would also work
        
              users = await response.json();
              
              let out = `
              <table class="table table-striped table-hover">
                <thead>
                  <tr>
                    <th> Name </th>
                    <th> Email </th>
                    <th> Message </th>
                  </tr>
                </thead>
                <tbody>`;
                  for(let i=0; i<users.length; i++){
                    out += `
                    <tr>
                      <td> ${users[i].name} </td>
                      <td> ${users[i].email} </td>
                      <td> ${users[i].message} </td>
                    </tr>`;
                  }
                  out+= `</tbody>
                </table>`;
                
                document.getElementById('rest').innerHTML = out;
              }

              getUsers();
              
            </script>

            <script>
              var btn = document.getElementById("delete");
              btn.addEventListener("click", alertMe);
              function alertMe(){
              alert(dao.readAll());
            }
            </script>
            
    </body>
</html>
